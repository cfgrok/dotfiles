- name: Install XMonad
  apt:
    name:
    - libghc-xmonad-contrib-dev
    - libghc-xmonad-contrib-doc
    - libghc-xmonad-dev
    - libghc-xmonad-doc
    - suckless-tools
    - xmonad
  become: true
- name: copy XMonad config
  copy:
    src: xmonad.hs
    dest: ~/.config/xmonad/
- name: create XMonad cache directory
  file:
    path: ~/.cache/xmonad
    state: directory
- name: create XMonad data directory
  file:
    path: ~/.local/share/xmonad
    state: directory
- name: reset XMonad
  shell: "xmonad --recompile"
- name: set window manager
  dconf:
    key: /org/mate/desktop/session/required-components/windowmanager
    value: "'xmonad'"
- name: remove Mint menu super key mapping
  dconf:
    key: /com/linuxmint/mintmenu/hot-key
    value: "''"
- name: add desktop config file
  copy:
    src: xmonad.desktop
    dest: /usr/share/applications/
  become: true
- name: modify Mint desktop management script
  replace:
    path: /usr/lib/linuxmint/mintdesktop/mintdesktop.py
    regexp: '^(\s+)(settings.set_string\("windowmanager", "mint-window-manager"\))$'
    replace: '\1# \2'
  become: true
